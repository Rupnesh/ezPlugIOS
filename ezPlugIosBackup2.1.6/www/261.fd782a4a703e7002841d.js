(self.webpackChunkeZPlug=self.webpackChunkeZPlug||[]).push([[261],{261:(t,n,o)=>{"use strict";o.r(n),o.d(n,{StationDetailsBlePageModule:()=>Z});var e=o(8583),i=o(665),a=o(5298),r=o(7823),s=o(4762),c=o(5466),l=o(6738),g=o(8121),d=o(7716),p=o(7906),u=o(4471),h=o(4687),m=o(5970);function b(t,n){1&t&&d._UZ(0,"ion-back-button",6)}function f(t,n){1&t&&d._UZ(0,"ion-back-button",7)}function x(t,n){if(1&t&&(d.TgZ(0,"span",29),d._uU(1),d.ALo(2,"date"),d.ALo(3,"date"),d.qZA()),2&t){const t=d.oxw(2);d.xp6(1),d.AsE("",d.xi3(2,2,t.stationDetails.startTime,"shortTime")," - ",d.xi3(3,5,t.stationDetails.endTime,"shortTime"),"")}}function O(t,n){1&t&&(d.TgZ(0,"span",29),d._uU(1,"Open 24/7"),d.qZA())}const v=function(t){return{"background-color":t}};function _(t,n){if(1&t){const t=d.EpF();d.TgZ(0,"ion-content",8),d.TgZ(1,"ion-row"),d.TgZ(2,"ion-col",9),d.TgZ(3,"ion-item",10),d.TgZ(4,"div",11),d.TgZ(5,"ion-text",12),d._uU(6),d.qZA(),d.TgZ(7,"ion-text",13),d._uU(8),d.qZA(),d.qZA(),d.TgZ(9,"ion-label",14),d.NdJ("click",function(){return d.CHM(t),d.oxw().markAsFavourite()}),d._UZ(10,"ion-icon",15),d.qZA(),d.qZA(),d.TgZ(11,"ion-row"),d.TgZ(12,"ion-col",9),d.TgZ(13,"ion-label",16),d._uU(14),d.qZA(),d.qZA(),d.qZA(),d.TgZ(15,"ion-row"),d.TgZ(16,"ion-col",17),d.YNc(17,x,4,8,"span",18),d.YNc(18,O,2,0,"span",18),d.qZA(),d.TgZ(19,"ion-col",19),d.TgZ(20,"div",20),d.NdJ("click",function(){d.CHM(t);const n=d.oxw();return n.callStation(n.stationDetails.contact)}),d.TgZ(21,"span"),d._UZ(22,"ion-icon",21),d._uU(23),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(24,"ion-row"),d.TgZ(25,"ion-col",22),d.TgZ(26,"div",23),d.TgZ(27,"ion-chip",0),d.TgZ(28,"ion-label"),d._uU(29),d.qZA(),d.qZA(),d.TgZ(30,"ion-chip",0),d.TgZ(31,"ion-label"),d._uU(32),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(33,"ion-col",24),d.TgZ(34,"ion-chip",25),d.TgZ(35,"ion-label"),d._uU(36),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(37,"ion-row",26),d.TgZ(38,"ion-col",9),d.TgZ(39,"span",27),d._uU(40,"Price"),d.qZA(),d.TgZ(41,"span",28),d._uU(42),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&t){const t=d.oxw();d.xp6(6),d.Oqu(t.stationDetails.siteName),d.xp6(2),d.Oqu(t.stationDetailsStorage.stationName),d.xp6(2),d.Udp("color","#e53935"),d.Q6J("name",null!=t.stationDetails&&t.stationDetails.isMarkedAsFavourite?"heart":"heart-outline"),d.xp6(4),d.Oqu(t.stationDetails.address),d.xp6(3),d.Q6J("ngIf",!t.stationDetails.isAvailable247),d.xp6(1),d.Q6J("ngIf",t.stationDetails.isAvailable247),d.xp6(5),d.hij(" ",t.stationDetails.contact," "),d.xp6(6),d.Oqu(null!=t.stationDetails&&t.stationDetails.isPublic?"Public":"Private"),d.xp6(3),d.Oqu(t.stationDetails.isAvailable?"Open":"Closed"),d.xp6(2),d.Q6J("ngStyle",d.VKq(14,v,t.stationDetails.isConnectedToIoTHub?t.stationDetails.isAvailable?"lightgreen":"lightgray":"lightred")),d.xp6(2),d.Oqu(t.stationDetails.isConnectedToIoTHub?t.stationDetails.stationStatus:"Offline"),d.xp6(6),d.hij(" \u20b9 ",t.stationDetails.pricingDetails,"/unit")}}const C=[{path:"",component:(()=>{class t{constructor(t,n,o,e,i,a,r,s,c,l){this.router=t,this.dashboardService=n,this.popoverController=o,this.loaderService=e,this.route=i,this.callNumber=a,this.alertService=r,this.platform=s,this.alertController=c,this.modalController=l,this.userID="",this.stationDetails={},this.stationDetailsStorage={},this.routedFromNearby=!1}isEmpty(t){return!Object.keys(t).length}ionViewDidEnter(){return(0,s.mG)(this,void 0,void 0,function*(){this.subscription=this.platform.backButton.subscribeWithPriority(9999,()=>{"/app/station-details"===this.router.url&&this.router.navigate(this.routedFromNearby?["app/search-near-by"]:["app/dashboard"])}),this.dashboardService.getObject(c.E.OTP_SESSION).then(t=>{this.userID=t.user.userId});let t=yield this.dashboardService.getObject(c.E.OTP_SESSION);this.userID=t.user.userId,this.stationDetailsStorage=yield this.dashboardService.getObject(c.E.STATION_DETAILS),this.loadStationDetails()})}presentAlert(t,n){return(0,s.mG)(this,void 0,void 0,function*(){const n=yield this.alertController.create({header:"Warning!",message:t,buttons:[{text:"Cancel",role:"cancel",handler:()=>{}},{text:"Okay",handler:()=>{}}]});yield n.present()})}ngOnInit(){return(0,s.mG)(this,void 0,void 0,function*(){this.router.getCurrentNavigation().extras.state&&(this.routedFromNearby=!!this.router.getCurrentNavigation().extras.state.nearby)})}loadStationDetails(){return(0,s.mG)(this,void 0,void 0,function*(){let t=yield this.dashboardService.getObject(c.E.USER_LOCATION);null==t&&(t={Lattitude:0,Longitude:0}),this.loaderService.showLoader("Loading..."),this.dashboardService.getStationDetails(this.stationDetailsStorage.stationId,t,this.userID).subscribe(t=>{!1===t.hasError&&(this.stationDetails=t,this.loaderService.hideLoader(),this.dashboardService.setObject(t,c.E.STATION_DETAILS_INFO),t.isConnectedToIoTHub||this.alertService.presentToast(c.E.STATION_AVAILABILITY_MESSAGE))},t=>{this.loaderService.hideLoader(),this.alertService.presentToast(c.E.HTTP_RESPONSE_ERROR)})})}convertToTimeFormat(t){return l().startOf("day").seconds(t).format("HH:mm:ss")}returnNumber(t){return null===t?0:parseFloat(t).toFixed(3)}returnNumberPrice(t){return null===t?0:parseFloat(t).toFixed(2)}proceed(){this.router.navigate(["app/charge-ble"])}callStation(t){this.callNumber.callNumber(t,!0).then(t=>console.log("Launched dialer!",t)).catch(t=>{this.alertService.presentToast(t)})}markAsFavourite(){this.dashboardService.addStationToFavourite({userId:this.userID,stationId:this.stationDetailsStorage.stationId,stationName:this.stationDetailsStorage.stationName,connectorNumber:1}).subscribe(t=>{!1===t.hasError&&(this.loadStationDetails(),this.alertService.presentToast(this.stationDetails.isMarkedAsFavourite?"Removed from favourite":"Marked as favourite"))},t=>{this.alertService.presentToast(c.E.HTTP_RESPONSE_ERROR)})}showWalletModal(){return(0,s.mG)(this,void 0,void 0,function*(){const t=yield this.modalController.create({component:g.x,cssClass:"my-custom-modal-css-wallet",backdropDismiss:!0});return yield t.present()})}}return t.\u0275fac=function(n){return new(n||t)(d.Y36(a.F0),d.Y36(p.u),d.Y36(r.Dh),d.Y36(u.D),d.Y36(a.gz),d.Y36(h.X),d.Y36(m.c),d.Y36(r.t4),d.Y36(r.Br),d.Y36(r.IN))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-station-details-ble"]],decls:11,vars:3,consts:[["color","primary"],["slot","start"],["defaultHref","/app/dashboard",4,"ngIf"],["routerLink","/app/search-near-by",4,"ngIf"],["class","ion-padding-start ion-padding-end",4,"ngIf"],["shape","outline","expand","full",1,"animateButton",3,"click"],["defaultHref","/app/dashboard"],["routerLink","/app/search-near-by"],[1,"ion-padding-start","ion-padding-end"],["size","12"],[1,"item-40px"],[2,"display","flex","flex-direction","column"],["color","primary",2,"font-size","20px","font-weight","500"],["color","primary",1,"text-muted",2,"font-weight","450"],[2,"text-align","right",3,"click"],["fill","#e53935",2,"font-size","28px",3,"name"],[1,"text-muted"],["size","6"],["class","text-muted","style","line-height: 2.5;",4,"ngIf"],["size","6",1,"ion-text-right"],[1,"text-muted",2,"line-height","2.5",3,"click"],["name","call","color","primary",2,"margin-right","5px"],["size","7"],[2,"display","flex","flex-direction","row"],["size","5",1,"ion-text-right"],[3,"ngStyle"],[2,"height","auto !important"],[2,"font-size","14px","font-weight","500","letter-spacing","0.2px","color","var(--ion-color-primary-tint)"],[2,"float","right","font-size","14px"],[1,"text-muted",2,"line-height","2.5"]],template:function(t,n){1&t&&(d.TgZ(0,"ion-header"),d.TgZ(1,"ion-toolbar",0),d.TgZ(2,"ion-buttons",1),d.YNc(3,b,1,0,"ion-back-button",2),d.YNc(4,f,1,0,"ion-back-button",3),d.qZA(),d.TgZ(5,"ion-title"),d._uU(6,"Ready to Charge"),d.qZA(),d.qZA(),d.qZA(),d.YNc(7,_,43,16,"ion-content",4),d.TgZ(8,"ion-footer"),d.TgZ(9,"ion-button",5),d.NdJ("click",function(){return n.proceed()}),d._uU(10,"PROCEED "),d.qZA(),d.qZA()),2&t&&(d.xp6(3),d.Q6J("ngIf",!n.routedFromNearby),d.xp6(1),d.Q6J("ngIf",n.routedFromNearby),d.xp6(3),d.Q6J("ngIf",0==n.stationDetails.hasError))},directives:[r.Gu,r.sr,r.Sm,e.O5,r.wd,r.fr,r.YG,r.oU,r.cs,r.YI,a.rH,r.W2,r.Nd,r.wI,r.Ie,r.yW,r.Q$,r.gu,r.hM,e.PC],pipes:[e.uU],styles:["[_nghost-%COMP%]{--page-icon-color:var(--ion-color-secondary);--page-page-color:var(--ion-color-page-content)}.animateButton[_ngcontent-%COMP%]:not([disabled]){color:#fff;border-radius:5px;animation-name:backgroundColorPalette;animation-duration:2s;animation-iteration-count:infinite}@keyframes backgroundColorPalette{0%{background:#216581}50%{background:#4d6e7c}to{background:#002535}}.text-icon-muted[_ngcontent-%COMP%]{color:#21658180!important}.text-muted[_ngcontent-%COMP%]{color:var(--ion-color-primary-tint);font-size:14px}.text-muted-icon[_ngcontent-%COMP%]{--color:rgba(#000,0.5)!important}ion-card[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:36px;display:block;margin:0 auto}ion-range[_ngcontent-%COMP%]{padding-inline-start:16px!important}.avatar-circle[_ngcontent-%COMP%]{width:36px;height:36px;text-align:center;border-radius:50%;-webkit-border-radius:50%;-moz-border-radius:50%;display:table;margin:0 auto}.initials[_ngcontent-%COMP%]{color:#fff;display:table-cell;vertical-align:middle}.item-40px[_ngcontent-%COMP%]{--min-height:44px!important;--max-height:44px!important;height:44px!important;--inner-padding-end:0px!important;--padding-start:0;padding:0 5px}.user-title[_ngcontent-%COMP%]{margin:0;color:var(--ion-color-medium);font-size:16px}ion-content[_ngcontent-%COMP%]{--ion-background-color:var(--page-page-color)}ion-card[_ngcontent-%COMP%]{background-color:#fff!important}.radio-tags[_ngcontent-%COMP%]{padding:0 calc(var(--page-margin) - var(--page-tags-gutter));justify-content:space-between;--radio-tag-color:#000;--radio-tag-background:#fff;--radio-tag-active-color:#fff;--radio-tag-active-background:#000;--radio-tag-icon-color:var(--ion-color-primary)}.radio-tags[_ngcontent-%COMP%]   .radio-tag[_ngcontent-%COMP%]{--padding-start:0px;--inner-padding-end:8px;--inner-padding-start:8px;--min-height:38px;--border-radius:8px;--border-width:1px;--border-style:solid;--border-color:var(--radio-tag-color);--ion-item-background:var(--radio-tag-background);--ion-item-color:var(--radio-tag-color);flex:1}.radio-tags[_ngcontent-%COMP%]   .radio-tag[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--radio-tag-icon-color)}.radio-tags[_ngcontent-%COMP%]   .radio-tag[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{font-size:14px!important}.radio-tags[_ngcontent-%COMP%]   .radio-tag.item-radio-checked[_ngcontent-%COMP%]{--ion-item-background:var(--radio-tag-active-background);--ion-item-color:var(--radio-tag-active-color)}.radio-tags[_ngcontent-%COMP%]   .radio-tag.item-radio-checked[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#fff}.radio-tags[_ngcontent-%COMP%]   .radio-tag.item-radio-checked[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{color:#fff;font-size:14px!important}.radio-tags[_ngcontent-%COMP%]   .radio-tag.item-interactive-disabled[_ngcontent-%COMP%]{opacity:.5}.radio-tags[_ngcontent-%COMP%]   .radio-tag.item-interactive-disabled[_ngcontent-%COMP%]   .tag-label[_ngcontent-%COMP%]{font-size:14px!important;opacity:1}.radio-tags[_ngcontent-%COMP%]   .radio-tag[_ngcontent-%COMP%]   .tag-label[_ngcontent-%COMP%]{margin:5px!important;font-size:14px!important;font-weight:500;letter-spacing:.2px;text-align:center}.radio-tags[_ngcontent-%COMP%]   .radio-tag[_ngcontent-%COMP%]   ion-radio[_ngcontent-%COMP%]{margin:0;width:0;--border-width:0px;height:0;--color-checked:#0000}.radio-tags[_ngcontent-%COMP%]   .radio-tag[_ngcontent-%COMP%]{--radio-tag-color:var(--ion-color-primary);--radio-tag-background:var(--ion-color-lightest);--radio-tag-active-color:var(--ion-color-lightest);--radio-tag-active-background:var(--ion-color-primary);margin-right:5px}.range-item[_ngcontent-%COMP%]{--ion-grid-column-padding:0px;padding-inline-start:var(--page-margin);padding-inline-end:var(--page-margin);box-shadow:inset 0 6px 3px -8px var(--ion-color-darkest)}.range-item[_ngcontent-%COMP%]   .range-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding-bottom:calc(var(--page-margin) / 2)}.range-item[_ngcontent-%COMP%]   .range-header[_ngcontent-%COMP%]   .range-value[_ngcontent-%COMP%]{font-size:12px;font-weight:600;letter-spacing:.2px;color:var(--ion-color-primary)}.range-item[_ngcontent-%COMP%]   .range-header[_ngcontent-%COMP%]   .range-label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;letter-spacing:.2px;color:var(--ion-color-primary-tint)}.range-item[_ngcontent-%COMP%]   .range-control[_ngcontent-%COMP%]{--ion-text-color:var(--ion-color-primary);padding-top:0;padding-bottom:0}ion-label[_ngcontent-%COMP%], p[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{color:var(--ion-color-primary)}p[_ngcontent-%COMP%]{margin:0}"]}),t})()}];let Z=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({imports:[[e.ez,i.u5,r.Pc,a.Bz.forChild(C)]]}),t})()}}]);