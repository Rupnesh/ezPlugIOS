(self.webpackChunkeZPlug=self.webpackChunkeZPlug||[]).push([[6806],{6806:(t,n,e)=>{"use strict";e.r(n),e.d(n,{SignupPageModule:()=>x});var o=e(8583),i=e(665),r=e(5298),s=e(7823),a=e(5466),g=e(7716),c=e(2218),p=e(7556),l=e(1188),h=e(4471),u=e(5970);const d=["f"];function m(t,n){if(1&t&&(g.TgZ(0,"ion-row",2),g.TgZ(1,"ion-col",18),g.TgZ(2,"ion-text",19),g._uU(3),g.qZA(),g.qZA(),g.qZA()),2&t){const t=g.oxw();g.xp6(3),g.hij("Retrieving OTP in 0:",t.secondsRemaing,"")}}function f(t,n){if(1&t){const t=g.EpF();g.TgZ(0,"ion-row",2),g.TgZ(1,"ion-col",18),g.TgZ(2,"ion-button",20),g.NdJ("click",function(){return g.CHM(t),g.oxw().resendOTP()}),g._uU(3,"Resend OTP"),g.qZA(),g.qZA(),g.qZA()}}const T=[{path:"",component:(()=>{class t{constructor(t,n,e,o,i,r,s){this.route=t,this.router=n,this.smsRetriever=e,this.auth=o,this.storage=i,this.loaderService=r,this.alertService=s,this.mobileNumber="",this.secondsRemaing=30,this.otpRetrive=!0,this.resendFlag=!1,this.submitFlag=!1,this.otp="",this.otpText1="",this.otpText2="",this.otpText3="",this.otpText4="",this.otpText5="",this.otpText6="",this.sessionId=""}ngAfterViewInit(){}ionViewDidEnter(){}ngOnInit(){this.smsRetriever.getAppHash().then(t=>{console.log("sms app hask key...",t)}).catch(t=>console.error(t)),this.route.queryParams.subscribe(t=>{t.mobile&&(this.mobileNumber=t.mobile,this.sessionId=t.sessionId,this.startSMSRead())})}startSMSRead(){window.clearInterval(this.secondsInterval),this.secondsInterval=setInterval(()=>{0===this.secondsRemaing?(clearInterval(this.secondsInterval),this.resendFlag=!0,this.otpRetrive=!1):(this.otpRetrive=!0,this.resendFlag=!1,this.secondsRemaing=this.secondsRemaing-1),this.submitFlag=!1},1e3),this.smsRetriever.startWatching().then(t=>{this.otp=/(\d{4})/g.exec(t.Message)[1],this.otp&&(this.otpText1=this.otp.charAt(0),this.otpText2=this.otp.charAt(1),this.otpText3=this.otp.charAt(2),this.otpText4=this.otp.charAt(3),this.submitFlag=!0,this.submitOTP())}).catch(t=>console.error(t))}otpController(t,n,e,o){if(this.otpText1&&this.otpText2&&this.otpText3&&this.otpText4)clearInterval(this.secondsInterval),this.resendFlag=!1,this.otpRetrive=!1,this.submitFlag=!0,this.submitOTP();else{if(t.target.value.length<1&&e)e.setFocus();else{if(!(n&&t.target.value.length>0))return 0;n.setFocus()}this.submitFlag=!1}}onOTPPaste(t){this.otp=t.clipboardData.getData("text"),this.otpText1="",setTimeout(t=>{this.otpText1=this.otp.charAt(0),this.otpText2=this.otp.charAt(1),this.otpText3=this.otp.charAt(2),this.otpText4=this.otp.charAt(3)},10)}submitOTP(){this.loaderService.showLoader("Please wait...");let t=this.otpText1.toString()+this.otpText2.toString()+this.otpText3.toString()+this.otpText4.toString();this.auth.verfiyOTP({PhoneNumber:this.mobileNumber,SessionId:this.sessionId,OTP:t}).subscribe(t=>{!1===t.hasError?(this.loaderService.hideLoader(),this.storage.setItem(a.E.LOGIN_STATUS,"true"),this.storage.setObject(a.E.OTP_SESSION,t),this.router.navigate(["app/dashboard"])):(this.loaderService.hideLoader(),this.alertService.presentToast(t.errorDescription))},t=>{this.loaderService.hideLoader(),this.alertService.presentToast(a.E.HTTP_RESPONSE_ERROR)})}resendOTP(){this.secondsRemaing=30,this.resendFlag=!1,this.otpRetrive=!0,this.auth.getOTP(this.mobileNumber).subscribe(t=>{!1===t.hasError&&(this.sessionId=t.sessionId,this.startSMSRead())},t=>{})}}return t.\u0275fac=function(n){return new(n||t)(g.Y36(r.gz),g.Y36(r.F0),g.Y36(c.u),g.Y36(p.e),g.Y36(l.V),g.Y36(h.D),g.Y36(u.c))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-signup"]],viewQuery:function(t,n){if(1&t&&g.Gf(d,5),2&t){let t;g.iGM(t=g.CRH())&&(n.otpForm=t.first)}},decls:31,vars:7,consts:[["color","primary"],["slot","start"],[1,"ion-justify-content-center"],["size","12","size-sm","8","size-md","8","size-lg","4","size-xl","4"],[1,"ion-justify-content-center",2,"margin-top","36px"],["size","10",1,"ion-text-center"],[2,"font-size","24px","font-weight","bold"],[1,"text-muted"],["text-center","",1,"ion-justify-content-center"],["size","12",2,"display","flex","margin","0 auto"],["type","tel","inputmode","numeric","required","","maxlength","1",3,"ngModel","paste","ngModelChange","keyup"],["otp1",""],["type","tel","inputmode","numeric","required","","maxlength","1",3,"ngModel","ngModelChange","keyup"],["otp2",""],["otp3",""],["otp4",""],["class","ion-justify-content-center",4,"ngIf"],["fill","outline",3,"click"],["size","10",1,"ion-text-right"],[1,"text-muted",2,"line-height","4.5"],["fill","clear",3,"click"]],template:function(t,n){if(1&t){const t=g.EpF();g.TgZ(0,"ion-header"),g.TgZ(1,"ion-toolbar",0),g.TgZ(2,"ion-buttons",1),g._UZ(3,"ion-back-button"),g.qZA(),g.TgZ(4,"ion-title"),g._uU(5,"OTP VERIFICATION"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(6,"ion-content"),g.TgZ(7,"ion-row",2),g.TgZ(8,"ion-col",3),g.TgZ(9,"ion-row",4),g.TgZ(10,"ion-col",5),g.TgZ(11,"p",6),g._uU(12,"Enter Verification Code"),g.qZA(),g.TgZ(13,"ion-text",7),g._uU(14),g.qZA(),g.qZA(),g.qZA(),g.TgZ(15,"ion-row",8),g.TgZ(16,"ion-col",9),g.TgZ(17,"ion-input",10,11),g.NdJ("paste",function(t){return n.onOTPPaste(t)})("ngModelChange",function(t){return n.otpText1=t})("keyup",function(e){g.CHM(t);const o=g.MAs(20);return n.otpController(e,o,"",0)}),g.qZA(),g.TgZ(19,"ion-input",12,13),g.NdJ("ngModelChange",function(t){return n.otpText2=t})("keyup",function(e){g.CHM(t);const o=g.MAs(22),i=g.MAs(18);return n.otpController(e,o,i,1)}),g.qZA(),g.TgZ(21,"ion-input",12,14),g.NdJ("ngModelChange",function(t){return n.otpText3=t})("keyup",function(e){g.CHM(t);const o=g.MAs(24),i=g.MAs(20);return n.otpController(e,o,i,2)}),g.qZA(),g.TgZ(23,"ion-input",12,15),g.NdJ("ngModelChange",function(t){return n.otpText4=t})("keyup",function(e){g.CHM(t);const o=g.MAs(22);return n.otpController(e,"",o,3)}),g.qZA(),g.qZA(),g.qZA(),g.YNc(25,m,4,1,"ion-row",16),g.YNc(26,f,4,0,"ion-row",16),g.TgZ(27,"ion-row",2),g.TgZ(28,"ion-col",5),g.TgZ(29,"ion-button",17),g.NdJ("click",function(){return n.submitOTP()}),g._uU(30,"Submit"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()}2&t&&(g.xp6(14),g.hij("We have sent you a 4 digit verification code on ",n.mobileNumber,""),g.xp6(3),g.Q6J("ngModel",n.otpText1),g.xp6(2),g.Q6J("ngModel",n.otpText2),g.xp6(2),g.Q6J("ngModel",n.otpText3),g.xp6(2),g.Q6J("ngModel",n.otpText4),g.xp6(2),g.Q6J("ngIf",n.otpRetrive&&!n.submitFlag),g.xp6(1),g.Q6J("ngIf",n.resendFlag))},directives:[s.Gu,s.sr,s.Sm,s.oU,s.cs,s.wd,s.W2,s.Nd,s.wI,s.yW,s.pK,s.j9,i.Q7,i.nD,i.JJ,i.On,o.O5,s.YG],styles:['[_nghost-%COMP%]{--page-margin:var(--app-broad-margin);--page-background:var(--ion-color-primary-gradient-background)}.text-muted[_ngcontent-%COMP%]{color:#00000080!important;font-size:12px}ion-input[_ngcontent-%COMP%]{display:inline-block;width:auto;height:50px;margin:4px;--padding-start:0px;text-align:center;border-bottom:1px solid #216581;line-height:3}.signup-content[_ngcontent-%COMP%]{--background:var(--page-background);--padding-start:var(--page-margin);--padding-end:var(--page-margin);--padding-top:var(--page-margin);--padding-bottom:var(--page-margin)}.signup-content[_ngcontent-%COMP%]   .auth-title[_ngcontent-%COMP%]{color:var(--ion-color-dark);font-weight:700;margin-top:calc(var(--page-margin) / 2);margin-bottom:calc(var(--page-margin) * (3/2));letter-spacing:.6px}.signup-content[_ngcontent-%COMP%]   .inputs-list[_ngcontent-%COMP%]{--ion-item-background:#0000}.signup-content[_ngcontent-%COMP%]   .inputs-list[_ngcontent-%COMP%]   .input-item[_ngcontent-%COMP%]{--padding-start:0px;--padding-end:0px;--inner-padding-end:0px;color:#fff;--border-color:#fff;--highlight-color-invalid:#f39696}.signup-content[_ngcontent-%COMP%]   .inputs-list[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{margin:calc(var(--page-margin) / 2) 0;display:flex;align-items:center;color:#f39696;font-size:14px}.signup-content[_ngcontent-%COMP%]   .inputs-list[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{padding-inline-end:calc(var(--page-margin) / 2)}.signup-content[_ngcontent-%COMP%]   .signup-btn[_ngcontent-%COMP%]{margin:calc(var(--page-margin) / 2) 0;--background:#00d4ff}.signup-content[_ngcontent-%COMP%]   .other-auth-options-row[_ngcontent-%COMP%]{justify-content:flex-end;align-items:center}.signup-content[_ngcontent-%COMP%]   .other-auth-options-row[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]{--color:#fff;margin:0}.signup-content[_ngcontent-%COMP%]   .social-auth-options[_ngcontent-%COMP%]   .options-divider[_ngcontent-%COMP%]{color:var(--ion-color-medium);margin:var(--page-margin) 0;text-align:center}.signup-content[_ngcontent-%COMP%]   .social-auth-options[_ngcontent-%COMP%]   .social-auth-btn[_ngcontent-%COMP%]{margin:0}.signup-content[_ngcontent-%COMP%]   .social-auth-options[_ngcontent-%COMP%]   .social-auth-btn[_ngcontent-%COMP%]:not(:first-child){margin-top:var(--page-margin)}.signup-content[_ngcontent-%COMP%]   .legal-stuff[_ngcontent-%COMP%]{text-align:center;font-size:14px;margin:var(--page-margin) 0;color:var(--ion-color-medium)}.signup-content[_ngcontent-%COMP%]   .legal-stuff[_ngcontent-%COMP%]   .legal-action[_ngcontent-%COMP%]{font-weight:500;color:var(--ion-color-secondary);cursor:pointer}h6[_ngcontent-%COMP%]{overflow:hidden;text-align:center;margin:16px 5px;color:#fff}h6[_ngcontent-%COMP%]:after, h6[_ngcontent-%COMP%]:before{background-color:#fff;content:"";display:inline-block;height:1px;position:relative;vertical-align:middle;width:50%}h6[_ngcontent-%COMP%]:before{right:.5em;margin-left:-50%}h6[_ngcontent-%COMP%]:after{left:.5em;margin-right:-50%}']}),t})()}];let x=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=g.oAB({type:t}),t.\u0275inj=g.cJS({providers:[p.e,l.V,c.u],imports:[[o.ez,i.u5,i.UX,s.Pc,r.Bz.forChild(T)]]}),t})()}}]);