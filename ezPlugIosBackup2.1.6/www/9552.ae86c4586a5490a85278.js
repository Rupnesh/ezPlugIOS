(self.webpackChunkeZPlug=self.webpackChunkeZPlug||[]).push([[9552],{9552:(e,t,o)=>{"use strict";o.r(t),o.d(t,{WalletPageModule:()=>v});var n=o(8583),a=o(665),r=o(7823),i=o(5298),l=o(4762),c=o(5466),s=o(7716),u=o(7906),d=o(3760),g=o(4471);function h(e,t){1&e&&(s.TgZ(0,"ion-menu-button"),s._UZ(1,"ion-icon",25),s.qZA())}function m(e,t){1&e&&(s.TgZ(0,"ion-col",15),s.TgZ(1,"div",26),s.TgZ(2,"span",27),s._uU(3," \u20b9 "),s._UZ(4,"ion-spinner",28),s.qZA(),s.qZA(),s.qZA())}function p(e,t){if(1&e&&(s.TgZ(0,"ion-col",15),s.TgZ(1,"span",29),s._uU(2),s.qZA(),s.qZA()),2&e){const e=s.oxw();s.xp6(2),s.hij(" \u20b9 ",null!=e.walletBalance&&e.walletBalance.walletBalance?e.walletBalance.walletBalance.toFixed(2):0," ")}}function f(e,t){1&e&&(s.TgZ(0,"ion-label",30),s._uU(1,"*Please enter amount"),s.qZA())}function Z(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"ion-chip",31),s.NdJ("click",function(){const t=s.CHM(e).index;return s.oxw().changeTagColor(t)}),s.TgZ(1,"ion-label"),s._uU(2),s.qZA(),s.qZA()}if(2&e){const e=t.$implicit,o=t.index,n=s.oxw();s.Q6J("id",e.id)("color",n.tagDefaultColor[o]),s.xp6(2),s.Oqu(e.value)}}const b=[{path:"",component:(()=>{class e{constructor(e,t,o){this.dashboardService=e,this.iab=t,this.loaderService=o,this.tagDefaultColor=[],this.priceTag=[],this.walletBalance=[],this.amountError=!1}ngOnInit(){return(0,l.mG)(this,void 0,void 0,function*(){let e=yield this.dashboardService.getObject(c.E.OTP_SESSION);this.tagDefaultColor=["primary","dark","dark","dark"],this.priceTag=[{id:1,value:50},{id:2,value:100},{id:3,value:150},{id:4,value:200}],this.amount=this.priceTag[0].value,this.userID=e.user.userId})}ionViewWillEnter(){return(0,l.mG)(this,void 0,void 0,function*(){this.getWalletBalance()})}getWalletBalance(){return(0,l.mG)(this,void 0,void 0,function*(){this.walletBalanceLoader=!0,this.minimumWalletBalance=yield this.dashboardService.getItem(c.E.MINIMUM_WALLET_BALANCE),this.dashboardService.getWalletBalance().subscribe(e=>{!1===e.hasError&&(this.walletBalanceLoader=!1,this.walletBalance=e,this.amount=+this.walletBalance.walletBalance<+this.minimumWalletBalance?(this.minimumWalletBalance-this.walletBalance.walletBalance).toFixed(2):this.priceTag[0].value)},e=>{this.walletBalanceLoader=!1})})}changeAmount(){this.amountError=!(this.amount.length||this.amount>0)}rechargeWallet(){this.amount?(this.amountError=!1,this.dashboardService.rechargeWallet({userId:this.userID,rechargeAmount:this.amount}).subscribe(e=>{this.orderID=e.orderId,this.openPaymentInApp(e.orderId,e.paymentLink)})):this.amountError=!0}openPaymentInApp(e,t){const o=this.iab.create(t,"_blank",{hideurlbar:"yes",location:"yes",hidenavigationbuttons:"yes"});o.on("loadstop").subscribe(t=>{var n="https://test.cashfree.com/billpay/sim/thankyou";"https://www.cashfree.com/gateway/thankyou"!=t.url&&t.url!=n&&t.url!=`${n}/`||(o.close(),this.loaderService.showLoader("Loading..."),this.dashboardService.getRechargeWalletOrderStatus(e).subscribe(e=>{!1===e.hasError?(this.getWalletBalance(),this.loaderService.hideLoader()):this.loaderService.hideLoader()},e=>{this.loaderService.hideLoader()}))})}changeTagColor(e){this.amountError=!1;for(let t=0;t<this.tagDefaultColor.length;t++)e==t?(this.tagDefaultColor[t]="primary",this.amount=this.priceTag[t].value):this.tagDefaultColor[t]="dark"}refreshWalletBalance(){this.dashboardService.getRechargeWalletOrderStatus(this.orderID).subscribe(e=>{!1===e.hasError?(this.getWalletBalance(),this.loaderService.hideLoader()):this.loaderService.hideLoader()},e=>{this.loaderService.hideLoader()})}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(u.u),s.Y36(d.i),s.Y36(g.D))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-wallet"]],inputs:{showMenu:"showMenu"},decls:38,vars:6,consts:[[1,"ion-no-border"],["color","primary"],["slot","start"],[4,"ngIf"],[1,"balance-container"],[1,"actual-balance"],["size","12","class","ion-text-center",4,"ngIf","ngIfElse"],["elseSpan",""],["size","12"],[1,"centered-item"],[2,"font-size","16px","font-weight","500","margin-right","10px"],["id","refresh",3,"click"],["refresh",""],["name","refresh-outline",2,"font-size","16px","font-weight","500"],[1,"glass-card"],["size","12",1,"ion-text-center"],["color","primary",2,"font-weight","500"],[1,"amount-item"],["item-left","",2,"font-size","24px","font-weight","500","color","var(--ion-color-primary)"],["type","number","placeholder","Amount","name","username","required","",1,"amount-input","ion-text-center",3,"ngModel","ionChange","ngModelChange"],["color","danger",4,"ngIf"],[3,"id","color","click",4,"ngFor","ngForOf"],[2,"padding","1rem","background-color","var(--ion-color-page-content)"],["size","12",2,"--border-radius","8px"],["expand","block","color","primary",2,"--border-radius","4px !important",3,"click"],["name","grid-outline"],[2,"justify-content","center"],[1,"centered-item",2,"font-size","42px","font-weight","500"],["name","bubbles","color","medium"],[2,"font-size","42px","font-weight","500"],["color","danger"],[3,"id","color","click"]],template:function(e,t){if(1&e&&(s.TgZ(0,"ion-header",0),s.TgZ(1,"ion-toolbar",1),s.TgZ(2,"ion-buttons",2),s.YNc(3,h,2,0,"ion-menu-button",3),s.qZA(),s.TgZ(4,"ion-title"),s._uU(5," My Wallet "),s.qZA(),s.qZA(),s.qZA(),s.TgZ(6,"ion-content"),s.TgZ(7,"div",4),s.TgZ(8,"ion-row",5),s.YNc(9,m,5,0,"ion-col",6),s.YNc(10,p,3,1,"ng-template",null,7,s.W1O),s.qZA(),s.TgZ(12,"ion-row"),s.TgZ(13,"ion-col",8),s.TgZ(14,"div",9),s.TgZ(15,"span",10),s._uU(16,"eZPlug Wallet"),s.qZA(),s.TgZ(17,"div",11,12),s.NdJ("click",function(){return t.refreshWalletBalance()}),s._UZ(19,"ion-icon",13),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(20,"ion-row",14),s.TgZ(21,"ion-col",15),s.TgZ(22,"ion-label",16),s._uU(23,"How much would you like to add?"),s.qZA(),s.qZA(),s.TgZ(24,"ion-col",15),s.TgZ(25,"ion-item",17),s.TgZ(26,"span",18),s._uU(27,"\u20b9 "),s.qZA(),s.TgZ(28,"ion-input",19),s.NdJ("ionChange",function(){return t.changeAmount()})("ngModelChange",function(e){return t.amount=e}),s.qZA(),s.qZA(),s.YNc(29,f,2,0,"ion-label",20),s.qZA(),s.TgZ(30,"ion-col",8),s.TgZ(31,"div",9),s.YNc(32,Z,3,3,"ion-chip",21),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(33,"ion-footer",0),s.TgZ(34,"ion-row",22),s.TgZ(35,"ion-col",23),s.TgZ(36,"ion-button",24),s.NdJ("click",function(){return t.rechargeWallet()}),s._uU(37," Add Funds "),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e){const e=s.MAs(11);s.xp6(3),s.Q6J("ngIf",!t.showMenu),s.xp6(6),s.Q6J("ngIf",t.walletBalanceLoader)("ngIfElse",e),s.xp6(19),s.Q6J("ngModel",t.amount),s.xp6(1),s.Q6J("ngIf",t.amountError),s.xp6(3),s.Q6J("ngForOf",t.priceTag)}},directives:[r.Gu,r.sr,r.Sm,n.O5,r.wd,r.W2,r.Nd,r.wI,r.gu,r.Q$,r.Ie,r.pK,r.as,a.Q7,a.JJ,a.On,n.sg,r.fr,r.YG,r.fG,r.PQ,r.hM],styles:[".amount-input[_ngcontent-%COMP%]{width:30%!important;margin-left:16px;padding:16px;font-size:24px;color:var(--ion-color-primary);border:0 hidden var(--ion-color-primary);border-radius:0;text-shadow:0 0 8px #424242bf;--placeholder-font-weight:500}.amount-item[_ngcontent-%COMP%]{--border-color:var(--ion-color-primary);--padding-start:6px!important;--background:var(--ion-color-medium);width:60%;margin:0 auto}.balance-container[_ngcontent-%COMP%]{background-color:var(--ion-color-primary);padding:28px;border-bottom-left-radius:16px;border-bottom-right-radius:16px;height:40%}.actual-balance[_ngcontent-%COMP%]{color:var(--ion-color-medium)}.glass-card[_ngcontent-%COMP%]{border-radius:4px;margin-top:-10%;margin-right:1rem;margin-left:1rem;padding:1rem;background-color:var(--ion-color-medium)}.centered-item[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;color:#fff}.button-full[_nghost-%COMP%]:not(.button-round)   .button-native[_ngcontent-%COMP%]{border-radius:8px}"]}),e})(),resolve:{}}];let v=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[n.ez,a.u5,r.Pc,i.Bz.forChild(b)]]}),e})()}}]);