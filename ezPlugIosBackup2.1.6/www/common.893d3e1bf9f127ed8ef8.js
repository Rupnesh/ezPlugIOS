(self.webpackChunkeZPlug=self.webpackChunkeZPlug||[]).push([[8592],{8225:(e,t,n)=>{"use strict";n.d(t,{c:()=>a});var r=n(3150),o=n(2954),i=n(9461);const a=(e,t)=>{let n,a;const s=(e,r,o)=>{if("undefined"==typeof document)return;const i=document.elementFromPoint(e,r);i&&t(i)?i!==n&&(c(),l(i,o)):c()},l=(e,t)=>{n=e,a||(a=n);const o=n;(0,r.c)(()=>o.classList.add("ion-activated")),t()},c=(e=!1)=>{if(!n)return;const t=n;(0,r.c)(()=>t.classList.remove("ion-activated")),e&&a!==n&&n.click(),n=void 0};return(0,i.createGesture)({el:e,gestureName:"buttonActiveDrag",threshold:0,onStart:e=>s(e.currentX,e.currentY,o.a),onMove:e=>s(e.currentX,e.currentY,o.b),onEnd:()=>{c(!0),(0,o.h)(),a=void 0}})}},7330:(e,t,n)=>{"use strict";n.d(t,{a:()=>o,d:()=>i});var r=n(2377);const o=async(e,t,n,o,i)=>{if(e)return e.attachViewToDom(t,n,i,o);if("string"!=typeof n&&!(n instanceof HTMLElement))throw new Error("framework delegate is missing");const a="string"==typeof n?t.ownerDocument&&t.ownerDocument.createElement(n):n;return o&&o.forEach(e=>a.classList.add(e)),i&&Object.assign(a,i),t.appendChild(a),await new Promise(e=>(0,r.c)(a,e)),a},i=(e,t)=>{if(t){if(e)return e.removeViewFromDom(t.parentElement,t);t.remove()}return Promise.resolve()}},2954:(e,t,n)=>{"use strict";n.d(t,{a:()=>i,b:()=>a,c:()=>o,d:()=>l,h:()=>s});const r={getEngine(){const e=window;return e.TapticEngine||e.Capacitor&&e.Capacitor.isPluginAvailable("Haptics")&&e.Capacitor.Plugins.Haptics},available(){return!!this.getEngine()},isCordova:()=>!!window.TapticEngine,isCapacitor:()=>!!window.Capacitor,impact(e){const t=this.getEngine();if(!t)return;const n=this.isCapacitor()?e.style.toUpperCase():e.style;t.impact({style:n})},notification(e){const t=this.getEngine();if(!t)return;const n=this.isCapacitor()?e.style.toUpperCase():e.style;t.notification({style:n})},selection(){this.impact({style:"light"})},selectionStart(){const e=this.getEngine();e&&(this.isCapacitor()?e.selectionStart():e.gestureSelectionStart())},selectionChanged(){const e=this.getEngine();e&&(this.isCapacitor()?e.selectionChanged():e.gestureSelectionChanged())},selectionEnd(){const e=this.getEngine();e&&(this.isCapacitor()?e.selectionEnd():e.gestureSelectionEnd())}},o=()=>{r.selection()},i=()=>{r.selectionStart()},a=()=>{r.selectionChanged()},s=()=>{r.selectionEnd()},l=e=>{r.impact(e)}},6575:(e,t,n)=>{"use strict";n.d(t,{s:()=>r});const r=e=>{try{if(e instanceof class{constructor(e){this.value=e}})return e.value;if(!a()||"string"!=typeof e||""===e)return e;const t=document.createDocumentFragment(),n=document.createElement("div");t.appendChild(n),n.innerHTML=e,l.forEach(e=>{const n=t.querySelectorAll(e);for(let r=n.length-1;r>=0;r--){const e=n[r];e.parentNode?e.parentNode.removeChild(e):t.removeChild(e);const a=i(e);for(let t=0;t<a.length;t++)o(a[t])}});const r=i(t);for(let e=0;e<r.length;e++)o(r[e]);const s=document.createElement("div");s.appendChild(t);const c=s.querySelector("div");return null!==c?c.innerHTML:s.innerHTML}catch(t){return console.error(t),""}},o=e=>{if(e.nodeType&&1!==e.nodeType)return;for(let n=e.attributes.length-1;n>=0;n--){const t=e.attributes.item(n),r=t.name;if(!s.includes(r.toLowerCase())){e.removeAttribute(r);continue}const o=t.value;null!=o&&o.toLowerCase().includes("javascript:")&&e.removeAttribute(r)}const t=i(e);for(let n=0;n<t.length;n++)o(t[n])},i=e=>null!=e.children?e.children:e.childNodes,a=()=>{const e=window,t=e&&e.Ionic&&e.Ionic.config;return!t||(t.get?t.get("sanitizerEnabled",!0):!0===t.sanitizerEnabled||void 0===t.sanitizerEnabled)},s=["class","id","href","src","name","slot"],l=["script","style","iframe","meta","link","object","embed"]},408:(e,t,n)=>{"use strict";n.d(t,{S:()=>r});const r={bubbles:{dur:1e3,circles:9,fn:(e,t,n)=>{const r=e*t/n-e+"ms",o=2*Math.PI*t/n;return{r:5,style:{top:9*Math.sin(o)+"px",left:9*Math.cos(o)+"px","animation-delay":r}}}},circles:{dur:1e3,circles:8,fn:(e,t,n)=>{const r=t/n,o=e*r-e+"ms",i=2*Math.PI*r;return{r:5,style:{top:9*Math.sin(i)+"px",left:9*Math.cos(i)+"px","animation-delay":o}}}},circular:{dur:1400,elmDuration:!0,circles:1,fn:()=>({r:20,cx:48,cy:48,fill:"none",viewBox:"24 24 48 48",transform:"translate(0,0)",style:{}})},crescent:{dur:750,circles:1,fn:()=>({r:26,style:{}})},dots:{dur:750,circles:3,fn:(e,t)=>({r:6,style:{left:9-9*t+"px","animation-delay":-110*t+"ms"}})},lines:{dur:1e3,lines:12,fn:(e,t,n)=>({y1:17,y2:29,style:{transform:`rotate(${30*t+(t<6?180:-180)}deg)`,"animation-delay":e*t/n-e+"ms"}})},"lines-small":{dur:1e3,lines:12,fn:(e,t,n)=>({y1:12,y2:20,style:{transform:`rotate(${30*t+(t<6?180:-180)}deg)`,"animation-delay":e*t/n-e+"ms"}})}}},1269:(e,t,n)=>{"use strict";n.d(t,{c:()=>o,g:()=>i,h:()=>r,o:()=>s});const r=(e,t)=>null!==t.closest(e),o=(e,t)=>"string"==typeof e&&e.length>0?Object.assign({"ion-color":!0,[`ion-color-${e}`]:!0},t):t,i=e=>{const t={};return(e=>void 0!==e?(Array.isArray(e)?e:e.split(" ")).filter(e=>null!=e).map(e=>e.trim()).filter(e=>""!==e):[])(e).forEach(e=>t[e]=!0),t},a=/^[a-z][a-z0-9+\-.]*:/,s=async(e,t,n,r)=>{if(null!=e&&"#"!==e[0]&&!a.test(e)){const o=document.querySelector("ion-router");if(o)return null!=t&&t.preventDefault(),o.push(e,n,r)}return!1}},8121:(e,t,n)=>{"use strict";n.d(t,{x:()=>f});var r=n(4762),o=n(5466),i=n(7716),a=n(7906),s=n(3760),l=n(4471),c=n(7823),d=n(8583),u=n(665);function h(e,t){1&e&&(i.TgZ(0,"ion-col",15),i.TgZ(1,"div",26),i.TgZ(2,"span",27),i._uU(3," \u20b9 "),i._UZ(4,"ion-spinner",28),i.qZA(),i.qZA(),i.qZA())}function g(e,t){if(1&e&&(i.TgZ(0,"ion-col",15),i.TgZ(1,"span",29),i._uU(2),i.qZA(),i.qZA()),2&e){const e=i.oxw();i.xp6(2),i.hij(" \u20b9 ",null!=e.walletBalance&&e.walletBalance.walletBalance?e.walletBalance.walletBalance.toFixed(2):0," ")}}function m(e,t){1&e&&(i.TgZ(0,"ion-label",30),i._uU(1,"*Please enter amount"),i.qZA())}function p(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"ion-chip",31),i.NdJ("click",function(){const t=i.CHM(e).index;return i.oxw().changeTagColor(t)}),i.TgZ(1,"ion-label"),i._uU(2),i.qZA(),i.qZA()}if(2&e){const e=t.$implicit,n=t.index,r=i.oxw();i.Q6J("id",e.id)("color",r.tagDefaultColor[n]),i.xp6(2),i.Oqu(e.value)}}let f=(()=>{class e{constructor(e,t,n,r){this.dashboardService=e,this.iab=t,this.loaderService=n,this.modlCtrl=r,this.tagDefaultColor=[],this.priceTag=[],this.walletBalance=[],this.amountError=!1}ngOnInit(){return(0,r.mG)(this,void 0,void 0,function*(){})}ionViewDidEnter(){return(0,r.mG)(this,void 0,void 0,function*(){this.tagDefaultColor=["primary","dark","dark","dark"],this.priceTag=[{id:1,value:50},{id:2,value:100},{id:3,value:150},{id:4,value:200}];let e=yield this.dashboardService.getObject(o.E.OTP_SESSION);this.userID=e.user.userId,this.getWalletBalance()})}getWalletBalance(){return(0,r.mG)(this,void 0,void 0,function*(){this.walletBalanceLoader=!0,this.minimumWalletBalance=yield this.dashboardService.getItem(o.E.MINIMUM_WALLET_BALANCE),this.dashboardService.getWalletBalance().subscribe(e=>{!1===e.hasError&&(this.walletBalanceLoader=!1,this.walletBalance=e,this.amount=+this.walletBalance.walletBalance<+this.minimumWalletBalance?this.minimumWalletBalance-this.walletBalance.walletBalance:this.priceTag[0].value)},e=>{this.walletBalanceLoader=!1})})}changeAmount(){this.amountError=!(this.amount.length||this.amount>0)}rechargeWallet(){this.amount?(this.amountError=!1,this.dashboardService.rechargeWallet({userId:this.userID,rechargeAmount:this.amount}).subscribe(e=>{this.orderID=e.orderId,this.openPaymentInApp(e.orderId,e.paymentLink)})):this.amountError=!0}openPaymentInApp(e,t){const n=this.iab.create(t,"_blank",{hideurlbar:"yes",location:"yes",hidenavigationbuttons:"yes"});n.on("loadstop").subscribe(t=>{var r="https://test.cashfree.com/billpay/sim/thankyou";"https://www.cashfree.com/gateway/thankyou"!=t.url&&t.url!=r&&t.url!=`${r}/`||(n.close(),this.loaderService.showLoader("Loading..."),this.dashboardService.getRechargeWalletOrderStatus(e).subscribe(e=>{!1===e.hasError?(this.getWalletBalance(),this.loaderService.hideLoader()):this.loaderService.hideLoader()},e=>{this.loaderService.hideLoader()}))})}changeTagColor(e){this.amountError=!1;for(let t=0;t<this.tagDefaultColor.length;t++)e==t?(this.tagDefaultColor[t]="primary",this.amount=this.priceTag[t].value):this.tagDefaultColor[t]="dark"}closeModal(){this.modlCtrl.dismiss()}refreshWalletBalance(){this.dashboardService.getRechargeWalletOrderStatus(this.orderID).subscribe(e=>{!1===e.hasError?(this.getWalletBalance(),this.loaderService.hideLoader()):this.loaderService.hideLoader()},e=>{this.loaderService.hideLoader()})}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(a.u),i.Y36(s.i),i.Y36(l.D),i.Y36(c.IN))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-wallet"]],inputs:{showMenu:"showMenu"},decls:39,vars:5,consts:[["no-border",""],["color","primary"],["slot","start"],[3,"click"],[1,"balance-container"],[1,"actual-balance"],["size","12","class","ion-text-center",4,"ngIf","ngIfElse"],["elseSpan",""],["size","12"],[1,"centered-item"],[2,"font-size","16px","font-weight","500","margin-right","10px"],["id","refresh",3,"click"],["refresh",""],["name","refresh-outline",2,"font-size","16px","font-weight","500"],[1,"glass-card"],["size","12",1,"ion-text-center"],["color","primary",2,"font-weight","500"],[1,"amount-item"],["item-left","",2,"font-size","24px","font-weight","500","color","var(--ion-color-primary)"],["type","number","placeholder","Amount","name","username","required","",1,"amount-input","ion-text-center",3,"ngModel","ionChange","ngModelChange"],["color","danger",4,"ngIf"],[3,"id","color","click",4,"ngFor","ngForOf"],[1,"ion-no-border"],[2,"padding","1rem","background-color","var(--ion-color-page-content)"],["size","12",2,"--border-radius","8px"],["expand","block","color","primary",2,"--border-radius","4px !important",3,"click"],[2,"justify-content","center"],[1,"centered-item",2,"font-size","42px","font-weight","500"],["name","bubbles","color","medium"],[2,"font-size","42px","font-weight","500"],["color","danger"],[3,"id","color","click"]],template:function(e,t){if(1&e&&(i.TgZ(0,"ion-header",0),i.TgZ(1,"ion-toolbar",1),i.TgZ(2,"ion-title"),i._uU(3," My Wallet "),i.qZA(),i.TgZ(4,"ion-buttons",2),i.TgZ(5,"ion-button",3),i.NdJ("click",function(){return t.closeModal()}),i._uU(6,"Close"),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.TgZ(7,"ion-content"),i.TgZ(8,"div",4),i.TgZ(9,"ion-row",5),i.YNc(10,h,5,0,"ion-col",6),i.YNc(11,g,3,1,"ng-template",null,7,i.W1O),i.qZA(),i.TgZ(13,"ion-row"),i.TgZ(14,"ion-col",8),i.TgZ(15,"div",9),i.TgZ(16,"span",10),i._uU(17,"eZPlug Wallet"),i.qZA(),i.TgZ(18,"div",11,12),i.NdJ("click",function(){return t.refreshWalletBalance()}),i._UZ(20,"ion-icon",13),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.TgZ(21,"ion-row",14),i.TgZ(22,"ion-col",15),i.TgZ(23,"ion-label",16),i._uU(24,"How much would you like to add?"),i.qZA(),i.qZA(),i.TgZ(25,"ion-col",15),i.TgZ(26,"ion-item",17),i.TgZ(27,"span",18),i._uU(28,"\u20b9 "),i.qZA(),i.TgZ(29,"ion-input",19),i.NdJ("ionChange",function(){return t.changeAmount()})("ngModelChange",function(e){return t.amount=e}),i.qZA(),i.qZA(),i.YNc(30,m,2,0,"ion-label",20),i.qZA(),i.TgZ(31,"ion-col",8),i.TgZ(32,"div",9),i.YNc(33,p,3,3,"ion-chip",21),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.TgZ(34,"ion-footer",22),i.TgZ(35,"ion-row",23),i.TgZ(36,"ion-col",24),i.TgZ(37,"ion-button",25),i.NdJ("click",function(){return t.rechargeWallet()}),i._uU(38," Add Funds "),i.qZA(),i.qZA(),i.qZA(),i.qZA()),2&e){const e=i.MAs(12);i.xp6(10),i.Q6J("ngIf",t.walletBalanceLoader)("ngIfElse",e),i.xp6(19),i.Q6J("ngModel",t.amount),i.xp6(1),i.Q6J("ngIf",t.amountError),i.xp6(3),i.Q6J("ngForOf",t.priceTag)}},directives:[c.Gu,c.sr,c.wd,c.Sm,c.YG,c.W2,c.Nd,d.O5,c.wI,c.gu,c.Q$,c.Ie,c.pK,c.as,u.Q7,u.JJ,u.On,d.sg,c.fr,c.PQ,c.hM],styles:[".amount-input[_ngcontent-%COMP%]{width:45%!important;margin-left:16px;padding:16px;font-size:24px;color:var(--ion-color-primary);border:0 hidden var(--ion-color-primary);border-radius:0;text-shadow:0 0 8px #424242bf;--placeholder-font-weight:500}.amount-item[_ngcontent-%COMP%]{--border-color:var(--ion-color-primary);--padding-start:6px!important;--background:var(--ion-color-medium);width:60%;margin:0 auto}.balance-container[_ngcontent-%COMP%]{background-color:var(--ion-color-primary);padding:28px;border-bottom-left-radius:16px;border-bottom-right-radius:16px;height:40%}.actual-balance[_ngcontent-%COMP%]{color:var(--ion-color-medium)}.glass-card[_ngcontent-%COMP%]{border-radius:4px;margin-top:-3%;margin-right:1rem;margin-left:1rem;padding:1rem;background-color:var(--ion-color-medium)}.centered-item[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;color:#fff}.button-full[_nghost-%COMP%]:not(.button-round)   .button-native[_ngcontent-%COMP%]{border-radius:8px}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]:first-of-type{padding-top:0!important}"]}),e})()},9496:(e,t,n)=>{"use strict";n.d(t,{S:()=>a});var r=n(4762);const o=(0,n(8384).fo)("Network",{web:()=>n.e(5182).then(n.bind(n,5182)).then(e=>new e.NetworkWeb)});var i=n(7716);let a=(()=>{class e{constructor(){}getNetworkStatus(){return(0,r.mG)(this,void 0,void 0,function*(){return this.networkListener=o.addListener("networkStatusChange",e=>{this.networkStatus=e}),this.networkStatus=yield o.getStatus()})}removeNetworkListener(){this.networkListener.remove()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);