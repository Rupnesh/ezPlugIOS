(self.webpackChunkeZPlug=self.webpackChunkeZPlug||[]).push([[1238],{1238:(t,i,e)=>{"use strict";e.r(i),e.d(i,{StationDetailsPageModule:()=>K});var n=e(8583),o=e(665),a=e(5298),r=e(7823),s=e(4762),l=e(2273),c=e(5466),g=e(6738),d=e(8121),u=e(7716),p=e(7906),h=e(4471),m=e(4687),b=e(5970);function x(t,i){1&t&&u._UZ(0,"ion-back-button",5)}function Z(t,i){1&t&&u._UZ(0,"ion-back-button",6)}function f(t,i){if(1&t){const t=u.EpF();u.TgZ(0,"ion-row"),u.TgZ(1,"ion-col",36),u.TgZ(2,"p",37),u._uU(3,"Low balance!"),u.qZA(),u.qZA(),u.TgZ(4,"ion-col",38),u.TgZ(5,"ion-button",39),u.NdJ("click",function(){return u.CHM(t),u.oxw(2).showWalletModal()}),u._uU(6,"Load"),u.qZA(),u.qZA(),u.qZA()}}function T(t,i){if(1&t&&(u.TgZ(0,"span",40),u._uU(1),u.ALo(2,"date"),u.ALo(3,"date"),u.qZA()),2&t){const t=u.oxw(2);u.xp6(1),u.AsE("",u.xi3(2,2,t.stationDetails.startTime,"shortTime")," - ",u.xi3(3,5,t.stationDetails.endTime,"shortTime"),"")}}function A(t,i){1&t&&(u.TgZ(0,"span",40),u._uU(1,"Open 24/7"),u.qZA())}function v(t,i){1&t&&u._UZ(0,"ion-icon",48)}function C(t,i){if(1&t&&u._UZ(0,"ion-icon",49),2&t){const t=u.oxw(3);u.Q6J("src","Price"===t.selectPricing?"../../assets/images/logo-inr-white.svg":"../../assets/images/logo-inr.svg")}}function _(t,i){1&t&&u._UZ(0,"ion-icon",50)}function q(t,i){1&t&&u._UZ(0,"ion-icon",51)}function S(t,i){if(1&t&&(u.TgZ(0,"ion-item",41),u.YNc(1,v,1,0,"ion-icon",42),u.YNc(2,C,1,1,"ion-icon",43),u.YNc(3,_,1,0,"ion-icon",44),u.YNc(4,q,1,0,"ion-icon",45),u.TgZ(5,"ion-text",46),u._uU(6),u.qZA(),u._UZ(7,"ion-radio",47),u.qZA()),2&t){const t=i.$implicit,e=u.oxw(2);u.xp6(1),u.Q6J("ngIf","full"===t),u.xp6(1),u.Q6J("ngIf","Price"===t),u.xp6(1),u.Q6J("ngIf","Unit"===t),u.xp6(1),u.Q6J("ngIf","Time"===t),u.xp6(2),u.Oqu(t),u.xp6(1),u.Q6J("value",t)("disabled",!(null!=e.minimumBalance&&e.minimumBalance.isMinimumWalletBalanceMaintained))}}function P(t,i){if(1&t){const t=u.EpF();u.TgZ(0,"ion-col",9),u.TgZ(1,"ion-range",59),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw(3).valueSliderPrice=i})("ionChange",function(){return u.CHM(t),u.oxw(3).onProgressChangeEnd()}),u.qZA(),u.qZA()}if(2&t){const t=u.oxw(3);u.xp6(1),u.Q6J("ngModel",t.valueSliderPrice)("debounce",300)("max",t.walletBalance)}}function k(t,i){1&t&&u._UZ(0,"ion-spinner",60)}function O(t,i){if(1&t&&(u.TgZ(0,"ion-row",61),u.TgZ(1,"ion-col",62),u.TgZ(2,"p"),u._uU(3),u.qZA(),u.TgZ(4,"ion-label"),u._uU(5,"\xa0Time"),u.qZA(),u.qZA(),u.TgZ(6,"ion-col",63),u.TgZ(7,"p"),u._uU(8),u.qZA(),u.TgZ(9,"ion-label"),u._uU(10,"\xa0Units"),u.qZA(),u.qZA(),u.TgZ(11,"ion-col",64),u.TgZ(12,"p"),u._uU(13),u.qZA(),u.TgZ(14,"ion-label"),u._uU(15,"\xa0Cost"),u.qZA(),u.qZA(),u.qZA()),2&t){const t=u.oxw(3);u.xp6(3),u.Oqu(t.convertToTimeFormat(t.estimatedData.timeTaken)),u.xp6(5),u.Oqu(t.returnNumber(t.estimatedData.unitsConsumed)),u.xp6(5),u.Oqu(t.returnNumberPrice(t.estimatedData.estimatedCost))}}function U(t,i){if(1&t&&(u.TgZ(0,"ion-row",52),u.TgZ(1,"ion-col",9),u.TgZ(2,"div",53),u.TgZ(3,"span",54),u._uU(4,"Amount"),u.qZA(),u.TgZ(5,"ion-chip",0),u._uU(6),u.qZA(),u.qZA(),u.qZA(),u.YNc(7,P,2,3,"ion-col",55),u.TgZ(8,"ion-col",9),u.TgZ(9,"span",56),u._uU(10,"Calculating Estimated values "),u.YNc(11,k,1,0,"ion-spinner",57),u.qZA(),u.YNc(12,O,16,3,"ion-row",58),u.qZA(),u.qZA()),2&t){const t=u.oxw(2);u.xp6(6),u.hij(" ",t.valueSliderPrice," "),u.xp6(1),u.Q6J("ngIf",t.estimatedData),u.xp6(4),u.Q6J("ngIf",t.estimatedLoader),u.xp6(1),u.Q6J("ngIf",t.estimatedFlag)}}function I(t,i){if(1&t){const t=u.EpF();u.TgZ(0,"ion-col",9),u.TgZ(1,"ion-range",65),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw(3).valueSliderUnits=i})("ionChange",function(){return u.CHM(t),u.oxw(3).onProgressChangeEnd()}),u.qZA(),u.qZA()}if(2&t){const t=u.oxw(3);u.xp6(1),u.Q6J("ngModel",t.valueSliderUnits)("debounce",300)("max",t.maxSliderUnits)}}function w(t,i){1&t&&u._UZ(0,"ion-spinner",60)}function M(t,i){if(1&t&&(u.TgZ(0,"ion-row",61),u.TgZ(1,"ion-col",62),u.TgZ(2,"p"),u._uU(3),u.qZA(),u.TgZ(4,"ion-label"),u._uU(5,"\xa0hour"),u.qZA(),u.qZA(),u.TgZ(6,"ion-col",63),u.TgZ(7,"p"),u._uU(8),u.qZA(),u.TgZ(9,"ion-label"),u._uU(10,"\xa0units"),u.qZA(),u.qZA(),u.TgZ(11,"ion-col",64),u.TgZ(12,"p"),u._uU(13),u.qZA(),u.TgZ(14,"ion-label"),u._uU(15,"\xa0cost"),u.qZA(),u.qZA(),u.qZA()),2&t){const t=u.oxw(3);u.xp6(3),u.Oqu(t.convertToTimeFormat(t.estimatedData.timeTaken)),u.xp6(5),u.Oqu(t.returnNumber(t.estimatedData.unitsConsumed)),u.xp6(5),u.Oqu(t.returnNumberPrice(t.estimatedData.estimatedCost))}}function D(t,i){if(1&t&&(u.TgZ(0,"ion-row",52),u.TgZ(1,"ion-col",9),u.TgZ(2,"div",53),u.TgZ(3,"span",54),u._uU(4,"Units"),u.qZA(),u.TgZ(5,"ion-chip",0),u._uU(6),u.qZA(),u.qZA(),u.qZA(),u.YNc(7,I,2,3,"ion-col",55),u.TgZ(8,"ion-col",9),u.TgZ(9,"span",56),u._uU(10,"Calculating Estimated values "),u.YNc(11,w,1,0,"ion-spinner",57),u.qZA(),u.YNc(12,M,16,3,"ion-row",58),u.qZA(),u.qZA()),2&t){const t=u.oxw(2);u.xp6(6),u.hij(" ",t.valueSliderUnits," Units "),u.xp6(1),u.Q6J("ngIf",t.estimatedData),u.xp6(4),u.Q6J("ngIf",t.estimatedLoader),u.xp6(1),u.Q6J("ngIf",t.estimatedFlag)}}function N(t,i){if(1&t){const t=u.EpF();u.TgZ(0,"ion-col",9),u.TgZ(1,"ion-range",65),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw(3).valueSliderTime=i})("ionChange",function(){return u.CHM(t),u.oxw(3).onProgressChangeEnd()}),u.qZA(),u.qZA()}if(2&t){const t=u.oxw(3);u.xp6(1),u.Q6J("ngModel",t.valueSliderTime)("debounce",300)("max",t.maxSliderTime)}}function E(t,i){1&t&&u._UZ(0,"ion-spinner",60)}function y(t,i){if(1&t&&(u.TgZ(0,"ion-row",61),u.TgZ(1,"ion-col",66),u.TgZ(2,"p"),u._uU(3),u.qZA(),u.TgZ(4,"ion-label"),u._uU(5,"\xa0hour"),u.qZA(),u.qZA(),u.TgZ(6,"ion-col",63),u.TgZ(7,"p"),u._uU(8),u.qZA(),u.TgZ(9,"ion-label"),u._uU(10,"\xa0units"),u.qZA(),u.qZA(),u.TgZ(11,"ion-col",64),u.TgZ(12,"p"),u._uU(13),u.qZA(),u.TgZ(14,"ion-label"),u._uU(15,"\xa0cost"),u.qZA(),u.qZA(),u.qZA()),2&t){const t=u.oxw(3);u.xp6(3),u.Oqu(t.convertToTimeFormat(t.estimatedData.timeTaken)),u.xp6(5),u.Oqu(t.returnNumber(t.estimatedData.unitsConsumed)),u.xp6(5),u.Oqu(t.returnNumberPrice(t.estimatedData.estimatedCost))}}function L(t,i){if(1&t&&(u.TgZ(0,"ion-row",52),u.TgZ(1,"ion-col",9),u.TgZ(2,"div",53),u.TgZ(3,"span",54),u._uU(4,"Time"),u.qZA(),u.TgZ(5,"ion-chip",0),u._uU(6),u.qZA(),u.qZA(),u.qZA(),u.YNc(7,N,2,3,"ion-col",55),u.TgZ(8,"ion-col",9),u.TgZ(9,"span",56),u._uU(10,"Calculating Estimated values "),u.YNc(11,E,1,0,"ion-spinner",57),u.qZA(),u.YNc(12,y,16,3,"ion-row",58),u.qZA(),u.qZA()),2&t){const t=u.oxw(2);u.xp6(6),u.hij(" ",t.valueSliderTime," Minutes "),u.xp6(1),u.Q6J("ngIf",t.estimatedData),u.xp6(4),u.Q6J("ngIf",t.estimatedLoader),u.xp6(1),u.Q6J("ngIf",t.estimatedFlag)}}function J(t,i){if(1&t){const t=u.EpF();u.TgZ(0,"ion-button",86),u.NdJ("click",function(){return u.CHM(t),u.oxw(4).boxSteps("unlock")}),u._uU(1,"UNLOCK "),u.qZA()}if(2&t){const t=u.oxw(4);u.Q6J("disabled",t.btnUnlock)}}function z(t,i){if(1&t&&(u.TgZ(0,"ion-button",87),u._UZ(1,"ion-spinner",88),u.qZA()),2&t){const t=u.oxw(4);u.Q6J("disabled",t.btnUnlock)}}function Q(t,i){if(1&t){const t=u.EpF();u.TgZ(0,"ion-button",85),u.NdJ("click",function(){return u.CHM(t),u.oxw(4).boxSteps("plugged")}),u._uU(1,"DONE "),u.qZA()}if(2&t){const t=u.oxw(4);u.Q6J("disabled",t.btnPlugged)}}function B(t,i){if(1&t&&(u.TgZ(0,"ion-button",87),u._UZ(1,"ion-spinner",88),u.qZA()),2&t){const t=u.oxw(4);u.Q6J("disabled",t.btnPlugged)}}function F(t,i){if(1&t){const t=u.EpF();u.TgZ(0,"ion-button",85),u.NdJ("click",function(){return u.CHM(t),u.oxw(4).boxSteps("lock")}),u._uU(1,"LOCK "),u.qZA()}if(2&t){const t=u.oxw(4);u.Q6J("disabled",t.btnLock)}}function Y(t,i){if(1&t&&(u.TgZ(0,"ion-button",87),u._UZ(1,"ion-spinner",88),u.qZA()),2&t){const t=u.oxw(4);u.Q6J("disabled",t.btnLock)}}function R(t,i){if(1&t){const t=u.EpF();u.TgZ(0,"ion-card"),u.TgZ(1,"ion-row"),u.TgZ(2,"ion-col",67),u.TgZ(3,"ion-row"),u.TgZ(4,"ion-col",68),u.TgZ(5,"div",69),u._UZ(6,"ion-icon",70),u.qZA(),u.TgZ(7,"ion-text",71),u.TgZ(8,"ion-label",72),u._uU(9,"Step 1"),u.qZA(),u.TgZ(10,"ion-label",73,74),u._uU(12,"Unlock box"),u.qZA(),u.qZA(),u.YNc(13,J,2,1,"ion-button",75),u.YNc(14,z,2,1,"ion-button",76),u.qZA(),u.TgZ(15,"ion-col",68),u._UZ(16,"ion-icon",77,78),u.TgZ(18,"ion-text",71),u.TgZ(19,"ion-label",72),u._uU(20,"Step 2"),u.qZA(),u.TgZ(21,"ion-label",79),u._uU(22,"Plug Cable"),u.qZA(),u.qZA(),u.YNc(23,Q,2,1,"ion-button",80),u.YNc(24,B,2,1,"ion-button",76),u.qZA(),u.TgZ(25,"ion-col",68),u._UZ(26,"ion-icon",81,82),u.TgZ(28,"ion-text",71),u.TgZ(29,"ion-label",72),u._uU(30,"Step 3"),u.qZA(),u.TgZ(31,"ion-label",79),u._uU(32,"Lock box"),u.qZA(),u.qZA(),u.YNc(33,F,2,1,"ion-button",80),u.YNc(34,Y,2,1,"ion-button",76),u.qZA(),u.TgZ(35,"ion-col",68),u._UZ(36,"ion-icon",83,84),u.TgZ(38,"ion-text",71),u.TgZ(39,"ion-label",72),u._uU(40,"Step 4"),u.qZA(),u.TgZ(41,"ion-label",79),u._uU(42,"Start Charging"),u.qZA(),u.qZA(),u.TgZ(43,"ion-button",85),u.NdJ("click",function(){return u.CHM(t),u.oxw(3).boxSteps("charge")}),u._uU(44," PROCEED "),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&t){const t=u.oxw(3);u.xp6(6),u.Q6J("color",t.btnUnlock?"light":"primary"),u.xp6(1),u.Q6J("ngClass",t.btnUnlock?"text-icon-muted":""),u.xp6(6),u.Q6J("ngIf",!t.btnUnlockLoader),u.xp6(1),u.Q6J("ngIf",t.btnUnlockLoader),u.xp6(2),u.Q6J("color",t.btnPlugged?"light":"primary"),u.xp6(2),u.Q6J("ngClass",t.btnPlugged?"text-icon-muted":""),u.xp6(5),u.Q6J("ngIf",!t.btnPlugBoxLoader),u.xp6(1),u.Q6J("ngIf",t.btnPlugBoxLoader),u.xp6(2),u.Q6J("color",t.btnLock?"light":"primary"),u.xp6(2),u.Q6J("ngClass",t.btnLock?"text-icon-muted":""),u.xp6(5),u.Q6J("ngIf",!t.btnLockBoxLoader),u.xp6(1),u.Q6J("ngIf",t.btnLockBoxLoader),u.xp6(2),u.Q6J("color",t.btnStartCharge?"light":"primary"),u.xp6(2),u.Q6J("ngClass",t.btnStartCharge?"text-icon-muted":""),u.xp6(5),u.Q6J("disabled",t.btnStartCharge)}}function H(t,i){if(1&t&&(u.TgZ(0,"div"),u.YNc(1,R,45,15,"ion-card",8),u.qZA()),2&t){const t=u.oxw(2);u.xp6(1),u.Q6J("ngIf","NotCharging"==t.stationDetails.chargingStatus)}}function j(t,i){}const G=function(t){return{"background-color":t}};function W(t,i){if(1&t){const t=u.EpF();u.TgZ(0,"ion-content",7),u.YNc(1,f,7,0,"ion-row",8),u.TgZ(2,"ion-row"),u.TgZ(3,"ion-col",9),u.TgZ(4,"ion-item",10),u.TgZ(5,"div",11),u.TgZ(6,"ion-text",12),u._uU(7),u.qZA(),u.TgZ(8,"ion-text",13),u._uU(9),u.qZA(),u.qZA(),u.TgZ(10,"ion-label",14),u.NdJ("click",function(){return u.CHM(t),u.oxw().markAsFavourite()}),u._UZ(11,"ion-icon",15),u.qZA(),u.qZA(),u.TgZ(12,"ion-row"),u.TgZ(13,"ion-col",9),u.TgZ(14,"ion-label",16),u._uU(15),u.qZA(),u.qZA(),u.qZA(),u.TgZ(16,"ion-row"),u.TgZ(17,"ion-col",17),u.YNc(18,T,4,8,"span",18),u.YNc(19,A,2,0,"span",18),u.qZA(),u.TgZ(20,"ion-col",19),u.TgZ(21,"div",20),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return i.callStation(i.stationDetails.contact)}),u.TgZ(22,"span"),u._UZ(23,"ion-icon",21),u._uU(24),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(25,"ion-row"),u.TgZ(26,"ion-col",22),u.TgZ(27,"div",23),u.TgZ(28,"ion-chip",0),u.TgZ(29,"ion-label"),u._uU(30),u.qZA(),u.qZA(),u.TgZ(31,"ion-chip",0),u.TgZ(32,"ion-label"),u._uU(33),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(34,"ion-col",24),u.TgZ(35,"ion-chip",25),u.TgZ(36,"ion-label"),u._uU(37),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(38,"ion-row",26),u.TgZ(39,"ion-col",9),u.TgZ(40,"span",27),u._uU(41,"Pricing Options"),u.qZA(),u.TgZ(42,"span",28),u._uU(43),u.qZA(),u.qZA(),u.TgZ(44,"ion-col",9),u.TgZ(45,"ion-radio-group",29),u.NdJ("ionChange",function(){u.CHM(t);const i=u.oxw();return i.radioPriceChange(i.selectPricing)})("ngModelChange",function(i){return u.CHM(t),u.oxw().selectPricing=i}),u.TgZ(46,"ion-row",30),u.YNc(47,S,8,7,"ion-item",31),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.YNc(48,U,13,4,"ion-row",32),u.YNc(49,D,13,4,"ion-row",32),u.YNc(50,L,13,4,"ion-row",33),u.qZA(),u.YNc(51,H,2,1,"div",34),u.YNc(52,j,0,0,"ng-template",null,35,u.W1O),u.qZA(),u.qZA()}if(2&t){const t=u.MAs(53),i=u.oxw();u.xp6(1),u.Q6J("ngIf",1==(null==i.minimumBalance?null:i.minimumBalance.isMinimumWalletBalanceMaintained)),u.xp6(6),u.Oqu(i.stationDetails.siteName),u.xp6(2),u.Oqu(i.stationDetailsStorage.stationName),u.xp6(2),u.Udp("color","#e53935"),u.Q6J("name",null!=i.stationDetails&&i.stationDetails.isMarkedAsFavourite?"heart":"heart-outline"),u.xp6(4),u.Oqu(i.stationDetails.address),u.xp6(3),u.Q6J("ngIf",!i.stationDetails.isAvailable247),u.xp6(1),u.Q6J("ngIf",i.stationDetails.isAvailable247),u.xp6(5),u.hij(" ",i.stationDetails.contact," "),u.xp6(6),u.Oqu(null!=i.stationDetails&&i.stationDetails.isPublic?"Public":"Private"),u.xp6(3),u.Oqu(i.stationDetails.isAvailable?"Open":"Closed"),u.xp6(2),u.Q6J("ngStyle",u.VKq(22,G,i.stationDetails.isConnectedToIoTHub?i.stationDetails.isAvailable?"lightgreen":"lightgray":"lightred")),u.xp6(2),u.Oqu(i.stationDetails.isConnectedToIoTHub?i.stationDetails.stationStatus:"Offline"),u.xp6(6),u.hij(" \u20b9 ",i.stationDetails.pricingDetails,"/unit"),u.xp6(2),u.Q6J("ngModel",i.selectPricing),u.xp6(2),u.Q6J("ngForOf",i.pricingOptions),u.xp6(1),u.Q6J("ngIf","Price"===i.selectPricing),u.xp6(1),u.Q6J("ngIf","Unit"===i.selectPricing),u.xp6(1),u.Q6J("ngIf","Time"===i.selectPricing),u.xp6(1),u.Q6J("ngIf",(null==i.stationDetails?null:i.stationDetails.isConnectedToIoTHub)&&("Available"==(null==i.stationDetails?null:i.stationDetails.stationStatus)||"Occupied"==(null==i.stationDetails?null:i.stationDetails.stationStatus))&&(null==i.minimumBalance?null:i.minimumBalance.isMinimumWalletBalanceMaintained))("ngIfElse",t)}}const $=[{path:"",component:(()=>{class t{constructor(t,i,e,n,o,a,r,s,l,c,g,d){this.activatedRoute=t,this.router=i,this.dashboardService=e,this.popoverController=n,this.loaderService=o,this.route=a,this.callNumber=r,this.alertService=s,this.renderer=l,this.platform=c,this.alertController=g,this.modalController=d,this.userID="",this.connetorSelected="C1",this.selectPricing="full",this.valueSliderPrice=1,this.valueSliderUnits=1,this.valueSliderTime=1,this.stationDetails={},this.stationDetailsStorage={},this.pricingOptions=["full","Price","Unit","Time"],this.btnUnlockLoader=!1,this.btnLockBoxLoader=!1,this.btnUnlock=!1,this.btnPlugged=!0,this.btnLock=!0,this.btnStartCharge=!0,this.estimatedLoader=!1,this.estimatedFlag=!1,this.routedFromNearby=!1,this.walletBalance="",this.maxSliderUnits="",this.maxSliderTime=""}isEmpty(t){return!Object.keys(t).length}ionViewDidEnter(){return(0,s.mG)(this,void 0,void 0,function*(){this.subscription=this.platform.backButton.subscribeWithPriority(9999,()=>{"/app/station-details"===this.router.url&&(this.routedFromNearby?this.btnLockBoxFlag?this.presentAlert("Do you want to end this session?","app/search-near-by"):this.router.navigate(["app/search-near-by"]):this.btnLockBoxFlag?this.presentAlert("Do you want to end this session?","app/dashboard"):this.router.navigate(["app/dashboard"]))}),this.dashboardService.getObject(c.E.OTP_SESSION).then(t=>{this.userID=t.user.userId});let t=yield this.dashboardService.getObject(c.E.OTP_SESSION);this.userID=t.user.userId,this.stationDetailsStorage=yield this.dashboardService.getObject(c.E.STATION_DETAILS),this.walletBalance=yield this.dashboardService.getItem1(c.E.WALLET_BALANCE),this.loadStationDetails(),this.dashboardService.checkMinimumWalletBalanceMaintained().subscribe(t=>{this.minimumBalance=t})})}presentAlert(t,i){return(0,s.mG)(this,void 0,void 0,function*(){const e=yield this.alertController.create({header:"Warning!",message:t,buttons:[{text:"Cancel",role:"cancel",handler:()=>{}},{text:"Okay",handler:()=>{this.unlockBox("abort",i)}}]});yield e.present()})}ngOnInit(){return(0,s.mG)(this,void 0,void 0,function*(){this.router.getCurrentNavigation().extras.state&&(this.routedFromNearby=!!this.router.getCurrentNavigation().extras.state.nearby),this.walletBalance=yield this.dashboardService.getItem(c.E.WALLET_BALANCE)})}loadStationDetails(){return(0,s.mG)(this,void 0,void 0,function*(){let t=yield this.dashboardService.getObject(c.E.USER_LOCATION);null==t&&(t={Lattitude:0,Longitude:0}),this.loaderService.showLoader("Loading..."),this.dashboardService.getStationDetails(this.stationDetailsStorage.stationId,t,this.userID).subscribe(t=>{!1===t.hasError?(this.stationDetails=t,this.loaderService.hideLoader(),this.dashboardService.setObject(t,c.E.STATION_DETAILS_INFO),t.isConnectedToIoTHub||this.alertService.presentToast(c.E.STATION_AVAILABILITY_MESSAGE)):(this.btnUnlockLoader=!1,this.loaderService.hideLoader(),this.alertService.presentToast(t.errorDescription))},t=>{this.btnUnlockLoader=!1,this.loaderService.hideLoader(),this.alertService.presentToast(c.E.HTTP_RESPONSE_ERROR)})})}radioGroupChange(t){this.connetorSelected=t}radioPriceChange(t){let i,e,n;this.selectPricing=t,"full"===this.selectPricing&&(i=0,e=0,n=this.valueSliderUnits,this.getEstimateData("Unit",i,e,n)),"Price"===this.selectPricing&&(i=this.valueSliderPrice,e=0,n=0,this.getEstimateData("Price",i,e,n)),"Time"===this.selectPricing&&(e=this.valueSliderTime,i=0,n=0,this.getEstimateData("Time",i,e,n)),"Unit"===this.selectPricing&&(n=this.valueSliderUnits,i=0,e=0,this.getEstimateData("Unit",i,e,n))}rangeChange(t){}onProgressChangeEnd(){let t,i,e;"Price"===this.selectPricing&&(t=this.valueSliderPrice,i=0,e=0,this.getEstimateData("Price",t,i,e)),"Time"===this.selectPricing&&(i=this.valueSliderTime,t=0,e=0,this.getEstimateData("Time",t,i,e)),"Unit"===this.selectPricing&&(e=this.valueSliderUnits,t=0,i=0,this.getEstimateData("Unit",t,i,e))}convertToTimeFormat(t){return g().startOf("day").seconds(t).format("HH:mm:ss")}returnNumber(t){return null===t?0:parseFloat(t).toFixed(3)}returnNumberPrice(t){return null===t?0:parseFloat(t).toFixed(2)}localNotification(t){return(0,s.mG)(this,void 0,void 0,function*(){let i=g(g.now()).add(60*t,"minutes").format();yield l.s.schedule({notifications:[{title:"eZCharge Notification",body:"Estimated time reached",id:1,schedule:{at:g(i,g.defaultFormat).toDate()},attachments:[{id:"face",url:"http://placekitten.com/g/300/20",options:{}}],actionTypeId:"",extra:null}]})})}getEstimateData(t,i,e,n){return(0,s.mG)(this,void 0,void 0,function*(){this.estimatedLoader=!0;let o=yield this.dashboardService.getItem(c.E.PRICING_DETAILS);this.walletBalance=yield this.dashboardService.getItem(c.E.WALLET_BALANCE);let a=yield this.dashboardService.getObject(c.E.STATION_DETAILS_INFO);o||(o=a.pricingDetails),this.dashboardService.calculateTransactionEstimate({stationId:this.stationDetailsStorage.stationId,chargingOption:t,perUnitPrice:o,price:i,timeSpentCharging:60*e,units:n,walletBalance:this.walletBalance?this.walletBalance:0}).subscribe(i=>{!1===i.hasError&&(this.estimatedFlag=!0,this.estimatedData=i,this.maxSliderUnits=`${i.maxUnitsAvailableForCharging}`,this.maxSliderTime=`${(i.maxTimeAvailbaleForCharging/60).toFixed(0)}`,this.dashboardService.setObject(i,c.E.ESTIMATED_DATA),this.estimatedLoader=!1,this.dashboardService.notifyChargingDetailsRequest({messageId:"DataTransferRequest",deviceId:this.stationDetailsStorage.stationName,userId:this.userID,operationId:"NotifyChargingDetailsRequest",chargingOption:t,price:i.estimatedCost,timeInSeconds:i.timeTaken,units:"full"===this.selectPricing?i.maxUnitsAvailableForCharging:i.unitsConsumed,pricingRate:o,maxUnitsAvailableForCharging:i.maxUnitsAvailableForCharging}).subscribe(t=>{}))},t=>{this.estimatedLoader=!1,this.alertService.presentToast(c.E.HTTP_RESPONSE_ERROR)})})}proceed(){this.router.navigate(["app/charge"])}unlockBox(t,i){this.dashboardService.unLockDevice({messageId:"DataTransferRequest",deviceId:this.stationDetailsStorage.stationName,userId:this.userID,operationId:0}).subscribe(e=>{!1===e.hasError?(this.btnUnlock=!0,this.btnPlugged=!1,this.btnLock=!0,this.btnStartCharge=!0,this.btnUnlockLoader=!1,"abort"==t&&this.router.navigate([i])):(this.btnUnlockLoader=!1,this.alertService.presentToast(e.errorDescription))},t=>{this.btnUnlockLoader=!1,this.alertService.presentToast(c.E.HTTP_RESPONSE_ERROR)})}boxSteps(t){if("unlock"===t&&(this.btnUnlockLoader=!0,this.unlockBox("","")),"plugged"===t&&(this.btnUnlock=!0,this.btnPlugged=!0,this.btnLock=!1,this.btnStartCharge=!0,this.btnPlugBoxLoader=!1,this.dashboardService.setItem(g.now().toString(),c.E.PLUGGEDIN_START_TIME)),"lock"===t&&(this.btnLockBoxLoader=!0,this.btnLockBoxFlag=!0,this.dashboardService.lockStatusOfDevice({messageId:"DataTransferRequest",deviceId:this.stationDetailsStorage.stationName,userId:this.userID,operationId:"DoorStatusRequest"}).subscribe(t=>{!1===t.hasError?"Locked"===t.response.data.doorStatus?(this.btnUnlock=!0,this.btnPlugged=!0,this.btnLock=!0,this.btnStartCharge=!1,this.btnLockBoxLoader=!1):"Unlocked"===t.response.data.doorStatus&&(this.btnLockBoxLoader=!1,this.alertService.presentToast("Please check the box, and lock the door.")):(this.btnLockBoxLoader=!1,this.alertService.presentToast(t.errorDescription))},t=>{this.btnLockBoxLoader=!1,this.alertService.presentToast(c.E.HTTP_RESPONSE_ERROR)})),"charge"===t){let t=0,i=0,e=0;"Price"===this.selectPricing&&(t=this.valueSliderPrice,i=0,e=0),"Unit"===this.selectPricing&&(e=this.valueSliderUnits,t=0,i=0),"Time"===this.selectPricing&&(i=this.valueSliderTime/60,t=0,e=0),this.dashboardService.setObject({chargingOption:"full"===this.selectPricing?"Auto":this.selectPricing,price:t,timeInHours:i,units:e},c.E.SELECTED_CHARGING_OPTIONS),this.dashboardService.setItem("true",c.E.IS_CHARGING_ENABLED),this.router.navigate(["app/charge"],{replaceUrl:!0})}}callStation(t){this.callNumber.callNumber(t,!0).then(t=>console.log("Launched dialer!",t)).catch(t=>{this.alertService.presentToast(t)})}markAsFavourite(){this.dashboardService.addStationToFavourite({userId:this.userID,stationId:this.stationDetailsStorage.stationId,stationName:this.stationDetailsStorage.stationName,connectorNumber:1}).subscribe(t=>{!1===t.hasError&&(this.loadStationDetails(),this.alertService.presentToast(this.stationDetails.isMarkedAsFavourite?"Removed from favourite":"Marked as favourite"))},t=>{this.alertService.presentToast(c.E.HTTP_RESPONSE_ERROR)})}showWalletModal(){return(0,s.mG)(this,void 0,void 0,function*(){const t=yield this.modalController.create({component:d.x,cssClass:"my-custom-modal-css-wallet",backdropDismiss:!0});return yield t.present()})}}return t.\u0275fac=function(i){return new(i||t)(u.Y36(a.gz),u.Y36(a.F0),u.Y36(p.u),u.Y36(r.Dh),u.Y36(h.D),u.Y36(a.gz),u.Y36(m.X),u.Y36(b.c),u.Y36(u.Qsj),u.Y36(r.t4),u.Y36(r.Br),u.Y36(r.IN))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-station-details"]],decls:8,vars:3,consts:[["color","primary"],["slot","start"],["defaultHref","/app/dashboard",4,"ngIf"],["routerLink","/app/search-near-by",4,"ngIf"],["class","ion-padding-start ion-padding-end",4,"ngIf"],["defaultHref","/app/dashboard"],["routerLink","/app/search-near-by"],[1,"ion-padding-start","ion-padding-end"],[4,"ngIf"],["size","12"],[1,"item-40px"],[2,"display","flex","flex-direction","column"],["color","primary",2,"font-size","20px","font-weight","500"],["color","primary",1,"text-muted",2,"font-weight","450"],[2,"text-align","right",3,"click"],["fill","#e53935",2,"font-size","28px",3,"name"],[1,"text-muted"],["size","6"],["class","text-muted","style","line-height: 2.5;",4,"ngIf"],["size","6",1,"ion-text-right"],[1,"text-muted",2,"line-height","2.5",3,"click"],["name","call","color","primary",2,"margin-right","5px"],["size","7"],[2,"display","flex","flex-direction","row"],["size","5",1,"ion-text-right"],[3,"ngStyle"],[2,"height","auto !important"],[2,"font-size","14px","font-weight","500","letter-spacing","0.2px","color","var(--ion-color-primary-tint)"],[2,"float","right","font-size","14px"],[3,"ngModel","ionChange","ngModelChange"],[1,"radio-tags"],["class","radio-tag","lines","none",4,"ngFor","ngForOf"],["style","height: auto !important;padding-inline-start: 5px;\n      padding-inline-end: 5px;\n      box-shadow: none;","class","range-item",4,"ngIf"],["style","height: auto !important;padding-inline-start: 5px;\n      padding-inline-end: 5px; box-shadow: none;","class","range-item",4,"ngIf"],[4,"ngIf","ngIfElse"],["elseBlock",""],["size","8",2,"line-height","3"],[2,"color","#e53935"],["size","4",1,"ion-text-right"],["size","small","fill","outline",3,"click"],[1,"text-muted",2,"line-height","2.5"],["lines","none",1,"radio-tag"],["style","height: 14px; width: 14px;","class","tag-label","name","speedometer",4,"ngIf"],["style","height: 14px; width: 14px;","class","tag-label inr-logo",3,"src",4,"ngIf"],["style","height: 14px; width: 14px;","class","tag-label","name","flash",4,"ngIf"],["style","height: 14px; width: 14px;","class","tag-label","name","time",4,"ngIf"],["color","primary",1,""],[3,"value","disabled"],["name","speedometer",1,"tag-label",2,"height","14px","width","14px"],[1,"tag-label","inr-logo",2,"height","14px","width","14px",3,"src"],["name","flash",1,"tag-label",2,"height","14px","width","14px"],["name","time",1,"tag-label",2,"height","14px","width","14px"],[1,"range-item",2,"height","auto !important","padding-inline-start","5px","padding-inline-end","5px","box-shadow","none"],[1,"range-header",2,"padding-bottom","0"],[1,"range-label",2,"display","inline-flex","align-items","center"],["size","12",4,"ngIf"],[2,"height","42px","display","inline-flex","align-items","center"],["style","margin-left:10px","color","primary","name","bubbles",4,"ngIf"],["class","ion-justify-content-center ",4,"ngIf"],["color","primary","pin","true","color","primary","min","1","step","1",1,"range-control",2,"padding-inline-start","0",3,"ngModel","debounce","max","ngModelChange","ionChange"],["color","primary","name","bubbles",2,"margin-left","10px"],[1,"ion-justify-content-center"],["size","4","size-sm","4","size-md","3","size-lg","3","size-xl","2",1,"ion-text-left","progress"],["size","4","size-sm","4","size-md","3","size-lg","3","size-xl","2",1,"ion-text-center","progress"],["size","4","size-sm","4","size-md","3","size-lg","3","size-xl","2",1,"ion-text-right","progress"],["pin","true","color","primary","min","1","step","1",1,"range-control",2,"padding-inline-start","0",3,"ngModel","debounce","max","ngModelChange","ionChange"],["size","4","size-sm","4","size-md","3","size-lg","3","size-xl","2",1,"progress"],["size","12","size-sm","12","size-md","12","size-lg","12","size-xl","12"],["size","6","size-sm","6","size-md","6","size-lg","3","size-xl","3",1,"ion-text-center"],["id","icon-unlock",1,"avatar-circle"],["name","lock-open-outline",1,"initials",3,"color"],["color","primary",2,"display","grid",3,"ngClass"],[2,"font-size","12px","padding-top","10px"],["id","iconunlockText",2,"font-size","12px"],["iconunlockText",""],["class","animateButton","id","iconunlockButton","shape","outline","expand","block",3,"disabled","click",4,"ngIf"],["shape","outline","expand","block",3,"disabled",4,"ngIf"],["id","icon-plug","name","git-branch-outline",1,"initials",3,"color"],["iconplug",""],[2,"font-size","12px"],["class","animateButton","shape","outline","expand","block",3,"disabled","click",4,"ngIf"],["id","icon-lockbox","name","lock-closed-outline",1,"initials",3,"color"],["iconlockbox",""],["id","icon-proceed","name","flash-outline",1,"initials",3,"color"],["iconproceed",""],["shape","outline","expand","block",1,"animateButton",3,"disabled","click"],["id","iconunlockButton","shape","outline","expand","block",1,"animateButton",3,"disabled","click"],["shape","outline","expand","block",3,"disabled"],["name","bubbles",2,"text-align","center","display","block","margin","0 auto"]],template:function(t,i){1&t&&(u.TgZ(0,"ion-header"),u.TgZ(1,"ion-toolbar",0),u.TgZ(2,"ion-buttons",1),u.YNc(3,x,1,0,"ion-back-button",2),u.YNc(4,Z,1,0,"ion-back-button",3),u.qZA(),u.TgZ(5,"ion-title"),u._uU(6,"Ready to Charge"),u.qZA(),u.qZA(),u.qZA(),u.YNc(7,W,54,24,"ion-content",4)),2&t&&(u.xp6(3),u.Q6J("ngIf",!i.routedFromNearby),u.xp6(1),u.Q6J("ngIf",i.routedFromNearby),u.xp6(3),u.Q6J("ngIf",0==i.stationDetails.hasError))},directives:[r.Gu,r.sr,r.Sm,n.O5,r.wd,r.oU,r.cs,r.YI,a.rH,r.W2,r.Nd,r.wI,r.Ie,r.yW,r.Q$,r.gu,r.hM,n.PC,r.se,r.QI,o.JJ,o.On,n.sg,r.YG,r.B7,r.U5,r.I_,r.PQ,r.PM,n.mk],pipes:[n.uU],styles:["[_nghost-%COMP%]{--page-icon-color:var(--ion-color-secondary);--page-page-color:var(--ion-color-page-content)}.animateButton[_ngcontent-%COMP%]:not([disabled]){color:#fff;border-radius:5px;animation-name:backgroundColorPalette;animation-duration:2s;animation-iteration-count:infinite}@keyframes backgroundColorPalette{0%{background:#216581}50%{background:#4d6e7c}to{background:#002535}}.text-icon-muted[_ngcontent-%COMP%]{color:#21658180!important}.text-muted[_ngcontent-%COMP%]{color:var(--ion-color-primary-tint);font-size:14px}.text-muted-icon[_ngcontent-%COMP%]{--color:rgba(#000,0.5)!important}ion-card[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:36px;display:block;margin:0 auto}ion-range[_ngcontent-%COMP%]{padding-inline-start:16px!important}.avatar-circle[_ngcontent-%COMP%]{width:36px;height:36px;text-align:center;border-radius:50%;-webkit-border-radius:50%;-moz-border-radius:50%;display:table;margin:0 auto}.initials[_ngcontent-%COMP%]{color:#fff;display:table-cell;vertical-align:middle}.item-40px[_ngcontent-%COMP%]{--min-height:44px!important;--max-height:44px!important;height:44px!important;--inner-padding-end:0px!important;--padding-start:0;padding:0 5px}.user-title[_ngcontent-%COMP%]{margin:0;color:var(--ion-color-medium);font-size:16px}ion-content[_ngcontent-%COMP%]{--ion-background-color:var(--page-page-color)}ion-card[_ngcontent-%COMP%]{background-color:#fff!important}.radio-tags[_ngcontent-%COMP%]{padding:0 calc(var(--page-margin) - var(--page-tags-gutter));justify-content:space-between;--radio-tag-color:#000;--radio-tag-background:#fff;--radio-tag-active-color:#fff;--radio-tag-active-background:#000;--radio-tag-icon-color:var(--ion-color-primary)}.radio-tags[_ngcontent-%COMP%]   .radio-tag[_ngcontent-%COMP%]{--padding-start:0px;--inner-padding-end:8px;--inner-padding-start:8px;--min-height:38px;--border-radius:8px;--border-width:1px;--border-style:solid;--border-color:var(--radio-tag-color);--ion-item-background:var(--radio-tag-background);--ion-item-color:var(--radio-tag-color);flex:1}.radio-tags[_ngcontent-%COMP%]   .radio-tag[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--radio-tag-icon-color)}.radio-tags[_ngcontent-%COMP%]   .radio-tag[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{font-size:14px!important}.radio-tags[_ngcontent-%COMP%]   .radio-tag.item-radio-checked[_ngcontent-%COMP%]{--ion-item-background:var(--radio-tag-active-background);--ion-item-color:var(--radio-tag-active-color)}.radio-tags[_ngcontent-%COMP%]   .radio-tag.item-radio-checked[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#fff}.radio-tags[_ngcontent-%COMP%]   .radio-tag.item-radio-checked[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{color:#fff;font-size:14px!important}.radio-tags[_ngcontent-%COMP%]   .radio-tag.item-interactive-disabled[_ngcontent-%COMP%]{opacity:.5}.radio-tags[_ngcontent-%COMP%]   .radio-tag.item-interactive-disabled[_ngcontent-%COMP%]   .tag-label[_ngcontent-%COMP%]{font-size:14px!important;opacity:1}.radio-tags[_ngcontent-%COMP%]   .radio-tag[_ngcontent-%COMP%]   .tag-label[_ngcontent-%COMP%]{margin:5px!important;font-size:14px!important;font-weight:500;letter-spacing:.2px;text-align:center}.radio-tags[_ngcontent-%COMP%]   .radio-tag[_ngcontent-%COMP%]   ion-radio[_ngcontent-%COMP%]{margin:0;width:0;--border-width:0px;height:0;--color-checked:#0000}.radio-tags[_ngcontent-%COMP%]   .radio-tag[_ngcontent-%COMP%]{--radio-tag-color:var(--ion-color-primary);--radio-tag-background:var(--ion-color-lightest);--radio-tag-active-color:var(--ion-color-lightest);--radio-tag-active-background:var(--ion-color-primary);margin-right:5px}.range-item[_ngcontent-%COMP%]{--ion-grid-column-padding:0px;padding-inline-start:var(--page-margin);padding-inline-end:var(--page-margin);box-shadow:inset 0 6px 3px -8px var(--ion-color-darkest)}.range-item[_ngcontent-%COMP%]   .range-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding-bottom:calc(var(--page-margin) / 2)}.range-item[_ngcontent-%COMP%]   .range-header[_ngcontent-%COMP%]   .range-value[_ngcontent-%COMP%]{font-size:12px;font-weight:600;letter-spacing:.2px;color:var(--ion-color-primary)}.range-item[_ngcontent-%COMP%]   .range-header[_ngcontent-%COMP%]   .range-label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;letter-spacing:.2px;color:var(--ion-color-primary-tint)}.range-item[_ngcontent-%COMP%]   .range-control[_ngcontent-%COMP%]{--ion-text-color:var(--ion-color-primary);padding-top:0;padding-bottom:0}ion-label[_ngcontent-%COMP%], p[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{color:var(--ion-color-primary)}p[_ngcontent-%COMP%]{margin:0}"]}),t})()}];let K=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[n.ez,o.u5,r.Pc,a.Bz.forChild($)]]}),t})()}}]);